# JavaScript - 원시 값과 객체의 비교

## 설명

### 1. 원시 값

- 원시 값은 변경 불가능한 값입니다(읽기 전용 값).
- 원시 값은 변경 불가능한 값이기 때문에 값을 직접 변경할 수 없습니다.
  - 변수 값을 변경하기 위해 원시 값을 재할당하면 새로운 메모리 공간을 확보하고 재할당한 값을 저장한 후, 변수가 참조하던 메모리 공간의 주소를 변경한다.
    - 이를 불변성이라 합니다.
- 자바스크립트의 문자열은 원시 타입이며, 변경 불가능합니다.
  - 생성된 문자열의 일부 문자를 변경해도 반영되지 않습니다.

### 2. 값에 의한 전달

- 변수에 원시 값을 갖는 변수를 할당하면 할당받는 변수에는 할당되는 변수의 원시 값이 복사되어 전달됩니다.
  - 할당 받는 변수와 기존의 변수의 값은 다른 메모리 공간에 저장된 별개의 값입니다.
  - 이를 값에 의한 전달이라 합니다.
  - 실제로 엄격하게 표현하면 변수에는 값이 전달되는 것이 아니라 메모리 주소가 전달됩니다.
    - 변수와 같은 식별자는 값이 아니라 메모리 주소를 기억하고 있기 때문입니다.
  - 값에 의한 전달도 사실은 값을 전달하는 것이 아니라 메모리 주소를 전달합니다.

### 3. 객체

- 객체는 원시 값과 같이 확보해야 할 메모리 공간의 크기를 사전에 정해 둘 수 없습니다.
- 객체는 변경 가능한 값입니다.
- 객체를 할당한 변수가 기억하는 메모리 주소를 통해 메모리 공간에 접근하면 참조 값에 접근할 수 있습니다.
  - 참조 값은 생성된 객체가 저장된 메모리 공간의 주소, 그 자체입니다.
    - 메모리에 저장되어 있는 참조 값을 통해 실제 객체에 접근합니다.
- 객체는 변경 가능한 값이므로 재할당 없이 객체를 직접 변경할 수 있습니다.
  - 이때 객체를 할당한 변수에 재할당을 하지 않았으므로 객체를 할당한 변수의 참조 값은 변경되지 않습니다.
- 객체는 여러 개의 식별자가 하나의 객체를 공유할 수 있다는 단점이 존재합니다.

### 4. 얕은 복사와 깊은 복사

- 얕은 복사(shallow copy)란 객체를 복사할 때 원래값과 복사된 값이 같은 참조를 가리키고있는 것을 말합니다.
  - 객체안에 객체가 있을 경우 한개의 객체라도 원본 객체를 참조하고 있다면 이를 얕은 복사라고 합니다.

```js
const obj = {
  value: 1,
};

const obj2 = obj;
obj.value = 100;

console.log(obj.value === obj2.value); // true
```

- 깊은 복사(deep copy)는 내부의 모든 값들을 하나 하나 찾아서 전부 복상 방법이다.
  - 깊은 복사된 객체는 객체안에 객체가 있을 경우에도 원본과의 참조가 완전히 끊어진 객체를 말합니다.
  - 얇은 복사처럼 주소를 복사해서 공유하는 것이 아니라 객체안 속성(property)만 복사 하는 것을 의미합니다.

```js
const obj = {
  value: 1,
};

const obj2 = Object.assign({}, obj);
obj2.value = 100;

console.log(obj.value === obj2.value) // false
```

### 5. 참조에 의한 전달

- 객체를 가리키는 변수를 다른 변수에 할당하면 원본의 참조 값이 복사되어 전달되고 이를 참조에 의한 전달이라 합니다.
- 이것은 두 개의 식별자가 하나의 객체를 공유한다는 것을 의미합니다.
- 따라서 원본 또는 사본 중 어느 한쪽에서 객체를 변경하면 서로 영향을 주고 받습니다.

## 요약

- 원시 값은 변경 불가능한 값입니다.
- 객체(참조) 타입의 값은 변경 가능한 값입니다.
- 원시 값을 갖는 변수를 다른 변수에 할당하면 원본의 원시 값이 복사되어 전달됩니다(pass by value).
- 객체를 가리키는 변수를 다른 변수에 할당하면 원본의 참조 값이 복사되어 전달됩니다(pass by reference).

## 참고

- MDN [→(MDN)](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)
- shallow copy, deep copy [→(SITE)](https://roseline.oopy.io/dev/javascript-back-to-the-basic/shallow-copy-deep-copy)
